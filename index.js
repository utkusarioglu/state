!function(t,e){for(var r in e)t[r]=e[r]}(exports,function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(1),r(2);var n=r(3),i=r(4),o=function(){function t(e,r){var n=this;void 0===e&&(e="Generic"),void 0===r&&(r=null),this._channel=e,this._id=r||Math.random().toString().slice(2),t._states.pave([this._channel,this._id],(function(){n.throw_OverloadError()}),(function(){return{}}))}return t.prototype.get_Var=function(e){var r=this;return t._states.sniff([this._channel,this._id],(function(){console.log(n.C_State.E_VarNotDefined.subs(r._channel,r._id))}),(function(t){return t.sniff(e,(function(){}),(function(t){return t}))}))},t.prototype.set_Var=function(e,r){return t._states[this._channel][this._id].pave(e,(function(){return r}),(function(){return r})),this},t.prototype.copy_Var=function(t){var e=this.get_Var(t);return e?JSON.parse(JSON.stringify(e)):void 0},t.prototype.has_Var=function(e){return t._states[this._channel][this._id].sniff(e,(function(){return!1}),(function(){return!0}))},t.prototype.set_Vars=function(t){var e=this;return Object.entries(t).forEach((function(t){var r=t[0],n=t[1];e.set_Var(r,n)})),this},t.prototype.get_Vars=function(){return t._states[this._channel][this._id]},t.get_AllStates=function(e){if(void 0===e&&(e=!0),e){var r={};return Object.entries(this._states).forEach((function(t){var e=t[0],n=t[1],i=Object.keys(n);i.length<2?r[e]=n[i[0]]:r[e]=n})),r}return t._states},t.prototype.get_Id=function(){return this._id},t.prototype.get_Channel=function(){return this._channel},t.prototype.remove_State=function(){delete t._states[this._channel][this._id],t._states[this._channel].is_empty()&&delete t._states[this._channel]},t.prototype.track_Variable=function(e,r,n){if(void 0===r&&(r=void 0),void 0===n&&(n=function(){return!0}),t._tracking_enabled){var i=this.get_Channel(),o={Time:(new Date).getTime(),Channel:i,Namespace:i.split(":")[0].split("?")[0],Id:this.get_Id(),Variable:e,Value:void 0===r?this.copy_Var(e):r};n(o)&&t._track_stack.push(o)}},t.track_Variable=function(e,r,n){if(void 0===n&&(n=void 0),t._tracking_enabled){var i={Time:(new Date).getTime(),Channel:e,Namespace:e.split(":")[0].split("?")[0],Id:"-",Variable:r,Value:n};t._track_stack.push(i)}},t.get_AllTrackRecords=function(){return t._tracking_enabled?t._track_stack:n.C_State.E_TrackingOff},t.get_AllTrackedChannels=function(){return t._tracking_enabled?t._track_stack.map((function(t){return t.Channel})).filter((function(t,e,r){return r.indexOf(t)===e})):n.C_State.E_TrackingOff},t.get_AllTrackedNamespaces=function(){return t._tracking_enabled?t._track_stack.map((function(t){return t.Namespace})).filter((function(t,e,r){return r.indexOf(t)===e})):n.C_State.E_TrackingOff},t.get_SomeTrackRecords=function(e,r,o){if(void 0===r&&(r=!0),void 0===o&&(o=i.e_filterMode.And),!t._tracking_enabled)return n.C_State.E_TrackingOff;var u=t._track_stack.filter((function(t){var r=e.sniff("Time",(function(){return!0}),(function(e){var r=e[0],n=e[1];return(void 0===r||t.Time>=r)&&(void 0===n||t.Time<=n)})),n=e.sniff("Channels",(function(){return!0}),(function(e){return void 0!==e.find((function(e){return t.Channel===e}))||0===e.length})),u=e.sniff("Namespaces",(function(){return!0}),(function(e){return void 0!==e.find((function(e){return t.Namespace===e}))||0===e.length}));return[r,n,e.sniff("Variables",(function(){return!0}),(function(e){return void 0!==e.find((function(e){return t.Variable===e}))||0===e.length})),e.sniff("Call",(function(){return!0}),(function(e){return e(t)})),u].reduce((function(t,e){switch(t=void 0===t||t,o){case i.e_filterMode.And:return t&&e;case i.e_filterMode.Or:return t||e}}))}));return r&&(u=u.map((function(t){return delete t.Channel,delete t.Time,delete t.Id,t}))),u},t.prototype.set_OptionalProperties=function(t,e){var r=this;return t.forEach((function(t){r.assign_Property(t,e)})),this},t.prototype.set_RequiredProperties=function(t,e){var r=this;return t.forEach((function(t){if(!r.assign_Property(t,e))throw new Error(n.C_State.E_PropertyRequired.subs(t))})),this},t.prototype.assign_Property=function(t,e){var r=this,i=t.split(n.C_State.ExpressionSeparator).slice(-1)[0];return e.sniff(i,(function(){return!1}),(function(){return r.set_Var(t,e[i]),!0}))},t.prototype.set_OptionalClasses=function(t,e){var r=this;return Object.keys(t).forEach((function(n){r.assign_Class(t,n,e)})),this},t.prototype.set_RequiredClasses=function(t,e){var r=this;return Object.keys(t).forEach((function(i){if(!r.assign_Class(t,i,e))throw new Error(n.C_State.E_PropertyRequired.subs(i))})),this},t.prototype.throw_OverloadError=function(t){throw void 0===t&&(t=["empty"]),new Error(n.C_State.E_ChOverload.subs(this._channel,this._id,JSON.stringify(t)))},t.prototype.assign_Class=function(t,e,r){var i=this,o=e.split(n.C_State.ExpressionSeparator),u=o.slice(-1)[0];if(r.hasOwnProperty(u)){var a=Array.isArray(r[u])?r[u]:[r[u]];return this.get_Vars().pave(o,(function(){i.throw_OverloadError(o)}),(function(){return a.map((function(r){return new t[e](r)}))})),!0}return!1},t._states={},t._track_stack=[],t._tracking_enabled=!0,t}();e.State=o},function(t,e,r){var n;void 0===(n=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);Object.prototype.sniff=function(t,e,r){void 0===e&&(e=function(){return!1}),void 0===r&&(r=function(){return!0});for(var i=this,o=0,u=Array.isArray(t)?t:t.split(n.Separator.Expression);o<u.length;o++){var a=u[o];if(void 0===i[a])return e(i);i=i[a]}return r(i)},Object.prototype.pave=function(t,e,r){void 0===e&&(e=function(){return Object}),void 0===r&&(r=function(){return Object});var i=Array.isArray(t)?t:t.split(n.Separator.Expression),o=i.pop(),u=this,a=function(t){if(void 0===t[o])return t[o]=r()||{},!0;var n=e();return n&&(t[o]=n),!1};if(!(i.length>0))return a(u);u.sniff(i,(function(){for(var t=0,e=i;t<e.length;t++){var r=e[t];u[r]=u[r]?u[r]:{},u=u[r]}return a(u)}),(function(t){return a(t)}))},Object.prototype.is_empty=function(){for(var t in this)if(this.hasOwnProperty(t))return!1;return!0},Object.prototype.is_Object=function(){return this===Object(this)},Object.prototype.has_Function=function(t){return"function"==typeof this[t]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Separator={Expression:"."}}])}.apply(e,[]))||(t.exports=n)},function(t,e,r){var n;void 0===(n=function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),String.prototype.toProperCase=function(){return this.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}))},String.prototype.minify=function(){return this.replace(/\s/g,"")},String.prototype.chop=function(t){void 0===t&&(t=50);var e=new RegExp(".{1,"+t+"}","g");return this.match(e)||[]},String.prototype.subs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce((function(t,e,r){return t.replace("%"+r,e)}),this)}}])}.apply(e,[]))||(t.exports=n)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.C_State={E_VarNotDefined:"Instance %0/%1 is not defined",E_TrackingOff:"Tracking Disabled",E_PropertyRequired:"Property '%0' is required",E_ChOverload:"Channel overload occured at: %0.%1\n%2",ExpressionSeparator:"."}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.And=0]="And",t[t.Or=1]="Or"}(e.e_filterMode||(e.e_filterMode={}))}]));
//# sourceMappingURL=index.js.map